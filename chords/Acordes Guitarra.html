
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Starkids Guitarra - Fita de Progress√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              skyStart: '#e3f2fd',
              skyEnd: '#90caf9',
              starkids: {
                purple: '#8a2be2',
                blue: '#039be5',
                salmon: '#e57373',
                green: '#43a047',
                yellow: '#fdd835',
                orange: '#fb8c00',
                red: '#d32f2f',
              }
            },
            fontFamily: {
              lobster: ['Lobster', 'cursive'],
              poppins: ['Poppins', 'sans-serif'],
            }
          }
        }
      }
    </script>
    <style>
      .scrollbar-hide::-webkit-scrollbar {
          display: none;
      }
      .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
      }
      
      /* Custom animations for the strip items */
      @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-slide-up {
        animation: slideUp 0.4s ease-out forwards;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
  <body class="min-h-screen bg-gradient-to-b from-skyStart to-skyEnd py-10 px-4 flex flex-col items-center text-gray-800">

    <!-- T√≠tulo -->
    <h1 class="font-lobster text-5xl md:text-6xl text-[#0277bd] mb-8 text-center drop-shadow-[2px_2px_0_#fff]">
      Acordes Starkids
    </h1>

    <!-- Painel de Controles -->
    <div class="bg-white p-6 md:p-8 rounded-[50px] shadow-xl border-4 border-white flex flex-wrap gap-6 items-center justify-center mb-10 w-full max-w-4xl">
      
      <!-- Sele√ß√£o -->
      <div class="flex items-center gap-3">
        <label class="font-poppins font-semibold text-[#0277bd] uppercase text-lg hidden md:block">Acorde:</label>
        <select id="chordSelect" onchange="draw()" class="font-lobster text-2xl py-2 px-6 border-2 border-[#81d4fa] rounded-full text-[#01579b] bg-[#e1f5fe] cursor-pointer outline-none min-w-[200px] shadow-sm focus:ring-2 focus:ring-[#039be5]">
          <!-- Op√ß√µes preenchidas via JS -->
        </select>
      </div>

      <!-- Bot√µes -->
      <div class="flex gap-4 flex-wrap justify-center">
        <button onclick="downloadCurrent()" class="font-lobster text-xl px-8 py-3 rounded-full text-white transition-all duration-200 transform hover:-translate-y-1 active:translate-y-1 active:shadow-none flex items-center gap-2 bg-[#ff9800] shadow-[0_4px_0_#f57c00]">
          ‚¨áÔ∏è Baixar Atual
        </button>
        <button onclick="addToStrip()" class="font-lobster text-xl px-8 py-3 rounded-full text-white transition-all duration-200 transform hover:-translate-y-1 active:translate-y-1 active:shadow-none flex items-center gap-2 bg-[#4caf50] shadow-[0_4px_0_#388e3c]">
          ‚ûï Adicionar √† Fita
        </button>
      </div>
    </div>

    <!-- Canvas Principal (Visualiza√ß√£o) -->
    <div class="bg-white p-4 rounded-xl shadow-2xl mb-12 transform hover:scale-[1.01] transition-transform">
      <canvas id="chordCanvas" width="1000" height="1200" class="w-full max-w-[400px] h-auto rounded-lg"></canvas>
    </div>

    <!-- Fita de Progress√£o (Escondida inicialmente) -->
    <div id="stripContainer" class="hidden w-full max-w-6xl bg-white/90 p-8 rounded-[40px] shadow-xl border-4 border-white backdrop-blur-sm animate-slide-up">
      <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
        <h2 class="font-lobster text-3xl md:text-4xl text-[#0277bd]">Sua Fita de Progress√£o</h2>
        <button onclick="downloadStrip()" class="font-lobster text-lg px-6 py-2 rounded-full text-white transition-all duration-200 transform hover:-translate-y-1 active:translate-y-1 active:shadow-none bg-[#0277bd] shadow-[0_4px_0_#01579b] flex gap-2">
          üì¶ Baixar Fita Completa
        </button>
      </div>

      <!-- Area de Rolagem Horizontal -->
      <div id="stripList" class="flex gap-4 overflow-x-auto pb-8 pt-2 scrollbar-hide snap-x px-2">
        <!-- Itens adicionados via JS aqui -->
      </div>
      
      <div class="text-center text-sm text-gray-500 font-poppins mt-2 italic">
        (Role para o lado para ver mais ‚Ä¢ Clique no X para remover)
      </div>
    </div>

    <p class="mt-12 font-poppins font-semibold text-white text-shadow-sm opacity-90 drop-shadow-md">
      Design by XAND√ÉO
    </p>

    <script>
      // ==========================================
      // 1. CONSTANTES & DADOS
      // ==========================================
      
      const STARKIDS_PALETTE = {
        "C": "#8a2be2", "D": "#039be5", "E": "#e57373", 
        "F": "#43a047", "G": "#fdd835", "A": "#fb8c00", "B": "#d32f2f"
      };

      const NOTES = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
      
      // Afina√ß√£o Padr√£o (E A D G B E) -> √çndices 4, 9, 2, 7, 11, 4
      const TUNING = [4, 9, 2, 7, 11, 4]; 

      const CHORDS = {
        // --- MAIORES ---
        "C (D√≥ Maior)": [-1, 3, 2, 0, 1, 0],
        "D (R√© Maior)": [-1, -1, 0, 2, 3, 2],
        "E (Mi Maior)": [0, 2, 2, 1, 0, 0],
        "F (F√° Maior)": [1, 3, 3, 2, 1, 1],
        "G (Sol Maior)": [3, 2, 0, 0, 0, 3],
        "A (L√° Maior)": [-1, 0, 2, 2, 2, 0],
        "B (Si Maior)": [-1, 2, 4, 4, 4, 2],

        // --- MENORES ---
        "Cm (D√≥ Menor)": [-1, 3, 5, 5, 4, 3],
        "Dm (R√© Menor)": [-1, -1, 0, 2, 3, 1],
        "Em (Mi Menor)": [0, 2, 2, 0, 0, 0],
        "Fm (F√° Menor)": [1, 3, 3, 1, 1, 1],
        "Gm (Sol Menor)": [3, 5, 5, 3, 3, 3],
        "Am (L√° Menor)": [-1, 0, 2, 2, 1, 0],
        "Bm (Si Menor)": [-1, 2, 4, 4, 3, 2],

        // --- S√âTIMAS (DOMINANTES) ---
        "C7 (D√≥ com 7¬™)": [-1, 3, 2, 3, 1, 0],
        "D7 (R√© com 7¬™)": [-1, -1, 0, 2, 1, 2],
        "E7 (Mi com 7¬™)": [0, 2, 0, 1, 0, 0],
        "F7 (F√° com 7¬™)": [1, 3, 1, 2, 1, 1],
        "G7 (Sol com 7¬™)": [3, 2, 0, 0, 0, 1],
        "A7 (L√° com 7¬™)": [-1, 0, 2, 0, 2, 0],
        "B7 (Si com 7¬™)": [-1, 2, 1, 2, 0, 2],

        // --- S√âTIMAS MAIORES (Major 7) ---
        "Cmaj7 (D√≥ 7M)": [-1, 3, 2, 0, 0, 0],
        "Dmaj7 (R√© 7M)": [-1, -1, 0, 2, 2, 2],
        "Emaj7 (Mi 7M)": [0, 2, 1, 1, 0, 0],
        "Fmaj7 (F√° 7M)": [-1, -1, 3, 2, 1, 0],
        "Gmaj7 (Sol 7M)": [3, 2, 0, 0, 0, 2],
        "Amaj7 (L√° 7M)": [-1, 0, 2, 1, 2, 0]
      };

      const CONFIG = {
        width: 1000, height: 1200,
        gridX: 150, gridY: 250,
        cellWidth: 140, cellHeight: 160,
        numStrings: 6, numFrets: 5, nutThickness: 25
      };

      // Estado da Fita
      let stripData = [];

      // Elementos
      const canvas = document.getElementById('chordCanvas');
      const ctx = canvas.getContext('2d');
      const select = document.getElementById('chordSelect');
      const stripContainer = document.getElementById('stripContainer');
      const stripList = document.getElementById('stripList');

      // Inicializar Select
      Object.keys(CHORDS).forEach(c => {
        let opt = document.createElement('option');
        opt.value = c;
        opt.innerText = c;
        select.appendChild(opt);
      });

      // ==========================================
      // 2. L√ìGICA DE DESENHO
      // ==========================================

      function getNoteColor(stringIdx, fret) {
        if (fret < 0) return "#000";
        const openNoteVal = TUNING[stringIdx];
        const currentNoteVal = (openNoteVal + fret) % 12;
        let noteName = NOTES[currentNoteVal];
        const naturalNote = noteName.replace("#", ""); 
        return STARKIDS_PALETTE[naturalNote] || "#333";
      }

      function draw() {
        const chordName = select.value;
        const positions = CHORDS[chordName] || [-1,-1,-1,-1,-1,-1];
        
        // Fundo
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0, 0, CONFIG.width, CONFIG.height);

        const gridW = (CONFIG.numStrings - 1) * CONFIG.cellWidth;
        const gridH = CONFIG.numFrets * CONFIG.cellHeight;
        
        // Cordas (Verticais)
        ctx.strokeStyle = "#333";
        ctx.lineCap = "butt";
        for (let i = 0; i < CONFIG.numStrings; i++) {
          const x = CONFIG.gridX + (i * CONFIG.cellWidth);
          const stringNum = 6 - i; 
          ctx.lineWidth = 2 + (stringNum * 1.5);
          ctx.beginPath();
          ctx.moveTo(x, CONFIG.gridY);
          ctx.lineTo(x, CONFIG.gridY + gridH);
          ctx.stroke();
        }

        // Trastes (Horizontais)
        ctx.lineWidth = 4;
        for (let i = 0; i <= CONFIG.numFrets; i++) {
          const y = CONFIG.gridY + (i * CONFIG.cellHeight);
          ctx.beginPath();
          ctx.moveTo(CONFIG.gridX, y);
          ctx.lineTo(CONFIG.gridX + gridW, y);
          ctx.stroke();
        }

        // Pestana
        ctx.lineWidth = CONFIG.nutThickness;
        ctx.strokeStyle = "#111";
        ctx.beginPath();
        ctx.moveTo(CONFIG.gridX - 5, CONFIG.gridY);
        ctx.lineTo(CONFIG.gridX + gridW + 5, CONFIG.gridY);
        ctx.stroke();

        // Bolinhas
        positions.forEach((fret, i) => {
          const x = CONFIG.gridX + (i * CONFIG.cellWidth);
          
          if (fret === -1) {
            ctx.fillStyle = "#555";
            ctx.font = "bold 60px sans-serif";
            ctx.textAlign = "center";
            ctx.fillText("X", x, CONFIG.gridY - 40);
          } else if (fret > 0) {
            const color = getNoteColor(i, fret);
            const y = CONFIG.gridY + (fret * CONFIG.cellHeight) - (CONFIG.cellHeight / 2);
            ctx.beginPath();
            ctx.arc(x, y, 45, 0, 2 * Math.PI);
            ctx.fillStyle = color;
            ctx.fill();
          }
        });

        // T√≠tulo
        const displayTitle = chordName.split(" ")[0]; 
        ctx.fillStyle = "#333";
        ctx.font = "bold 140px 'Lobster'";
        ctx.textAlign = "center";
        ctx.fillText(displayTitle, CONFIG.width / 2, 160);
      }

      // ==========================================
      // 3. FUNCIONALIDADES DA FITA
      // ==========================================

      function downloadCurrent() {
        const name = select.value.split(" ")[0];
        const link = document.createElement('a');
        link.download = `Starkids_${name}.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
      }

      function addToStrip() {
        const chordName = select.value.split(" ")[0];
        const dataUrl = canvas.toDataURL("image/png");
        const id = Date.now();

        stripData.push({ id, name: chordName, src: dataUrl });
        renderStrip();
      }

      function removeFromStrip(id) {
        stripData = stripData.filter(item => item.id !== id);
        renderStrip();
      }

      function renderStrip() {
        // Mostrar/Ocultar container
        if (stripData.length > 0) {
          stripContainer.classList.remove('hidden');
        } else {
          stripContainer.classList.add('hidden');
        }

        stripList.innerHTML = '';

        stripData.forEach((item, index) => {
          // Container do Item
          const div = document.createElement('div');
          div.className = "relative group shrink-0 snap-center animate-slide-up";
          
          // Card
          const card = document.createElement('div');
          card.className = "bg-white p-2 rounded-lg shadow-md transform group-hover:-translate-y-2 transition-transform duration-300 border border-gray-100";

          // Imagem
          const img = document.createElement('img');
          img.src = item.src;
          img.className = "h-48 w-auto border border-gray-200 rounded";
          
          // Label
          const label = document.createElement('div');
          label.innerText = `${index + 1}. ${item.name}`;
          label.className = "text-center mt-2 font-lobster text-xl text-[#0277bd]";

          // Bot√£o Remover
          const btnRemove = document.createElement('button');
          btnRemove.innerHTML = "‚úï";
          btnRemove.onclick = () => removeFromStrip(item.id);
          btnRemove.className = "absolute -top-3 -right-3 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 font-bold hover:bg-red-600";

          // Seta (se n√£o for o √∫ltimo)
          if (index < stripData.length - 1) {
            const arrow = document.createElement('div');
            arrow.innerText = "‚ûú";
            arrow.className = "absolute top-1/2 -right-6 transform -translate-y-1/2 text-[#0277bd] text-2xl font-bold z-0";
            div.appendChild(arrow);
          }

          card.appendChild(img);
          card.appendChild(label);
          div.appendChild(card);
          div.appendChild(btnRemove);
          stripList.appendChild(div);
        });
      }

      function downloadStrip() {
        if (stripData.length === 0) return;

        // Criar canvas gigante tempor√°rio
        const tempCanvas = document.createElement('canvas');
        const tCtx = tempCanvas.getContext('2d');
        
        const singleW = CONFIG.width;
        const singleH = CONFIG.height;
        
        tempCanvas.width = singleW * stripData.length;
        tempCanvas.height = singleH;

        // Carregar todas as imagens e desenhar
        let loaded = 0;
        stripData.forEach((item, i) => {
          const img = new Image();
          img.onload = () => {
            tCtx.drawImage(img, i * singleW, 0);
            loaded++;
            if (loaded === stripData.length) {
              const link = document.createElement('a');
              link.download = "Starkids_Progressao_Completa.png";
              link.href = tempCanvas.toDataURL("image/png");
              link.click();
            }
          };
          img.src = item.src;
        });
      }

      // Desenho inicial
      window.onload = draw;
      document.fonts.ready.then(draw);

    </script>
  </body>
</html>
